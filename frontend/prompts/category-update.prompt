# Preprocessing
> Replace `{TARGET_CATEGORY}` with : washing-machine

# Context
You are a software developer responsible for creating high-quality, human-friendly configuration files for product categories in the Open4Goods project.

Your goal is to update the YAML configuration for `{TARGET_CATEGORY}` to match the quality and depth of the reference implementation.

## 1. Inputs & References
*   **Target Configuration**: `/verticals/src/main/resources/verticals/{TARGET_CATEGORY}.yml` (The file you will update)
*   **Reference Configuration**: `/verticals/src/main/resources/verticals/tv.yml` (The "Gold Standard" - well commented and reviewed)
*   **Base Configuration**: `/verticals/src/main/resources/verticals/_default.yml` (Inherited by all verticals)
*   **Attribute Definitions**: `/verticals/src/main/resources/attributes/`

## 2. Tools & API
You have access to a local API (`localhost:8081`) to fetch live data.
*   **Base URL**: `http://localhost:8081`
*   **Auth Header**: `Authorization: open4goods`

You can also use web tools (search) to get access to market informations on {TARGET_CATEGORY}`
If API Fails : Break and inform the user
---

# Tasks

## Phase 1: Semantic Review & cleanup
**Goal**: Ensure the config file is semantically correct and well-translated.
1.  Read `/verticals/src/main/resources/verticals/{TARGET_CATEGORY}.yml`.
2.  Check for obvious errors or misconfigurations.
3.  Ensure text fields (titles, descriptions) are:
    *   Grammatically correct in **French** (fr) and English (en).
    *    consistent with the vertical's domain.

4 - Setup custom properties for attributes parser. (parsers:) For example, based on the reference implementation, update

parsers:
  weight:
    minKg:
    maxKg:
  warranty:
    minYears:
    maxYears:

To match the {TARGET_CATEGORY} specificities

5 - Setup the average time in hours per day this product will be used.

Set it in averageHoursPerDay. Try to add yaml comments to explain


## Phase 2: Attribute Mapping
**Goal**: Define which attributes are relevant for this category based on real data coverage.

1.  **Fetch Attribute Statistics**:
    ```bash
    curl -X 'GET' \
      'http://localhost:8081/update/{TARGET_CATEGORY}/attributes/?minCoverage=5' \
      -H 'accept: application/json' \
      -H 'Authorization: open4goods'
    ```
2.  **Analyze the JSON Output**:
    *   Identify attributes with high coverage ("hits" count).
    *   Ignore technical attributes coming from `standard` datasources if they are meaningless to a consumer (e.g., internal IDs).
    *   *DISMISS** custom attributes (starting with `CUSTOM_`) or "Themes"), only retain the one that are product features
    *   exclude already defined attributes from `/verticals/src/main/resources/attributes/` if they exist.
3.  **Update Configuration**:
    *   You will propose the maximum top 30 features, with a table report to the user (id, french_name, coverage). Can be none, if no new pertinent, with acceptable coverage feature appears.
    *   You will then ask for the user to input the attributes (using id) he wants to be generated and interrupt
    *   When the user sends you back attribute id , you will generate them in `/verticals/src/main/resources/attributes/`
    *   If you create new attributes, create them in the

4 - Update
## Phase 3: Specific filters configuration

5 - Update popularAttributes
 Set popularAttributes with available attributes. popularAttributes  will be presented in product cards, or will be "top filters".


### 3.1 Configure Filters (Subsets)
1.  **Price Ranges**:
    *   Based on your knowledge of the market (or the product sample), define 3 price buckets: `Low`, `Medium`, `Premium`.
    *   Update `subsetGroups` (id: price) and `subsets` accordingly.
2.  **Top Filters** (e.g., "Screen Size" for TV, "Capacity" for Washing Machine):
    *   Choose 2 or 3 key attributes that are the primary decision factors for buyers.
    *   Create a `subsetGroup` for them.
    *   Define `subsets` for ranges (e.g., "< 6kg", "6-9kg", "> 9kg").

### 3.1 Configure FastFilters
the subset:, root in the configuration file. ImpactScore filters is already defined for all in _default.yml
Provides default filtering options for the category page, a standard user will be happy to have easily at disposition


## Phase 4 - Setting the availableImpact score criterias

(availableImpactScoreCriterias:)

from

curl -X 'GET' \
  'http://localhost:8081/{TARGET_CATEGORY}/impactscore-criterias/?minCoveragePercent=10' \
  -H 'accept: */*' \
  -H 'Authorization: open4goods'

This will be the scores allowed to participate in Impact Score computation



# Validate and reporting
Validate by checking :
- [ ] Vertical is validated with /verticals/src/test/java/org/open4goods/verticals/VerticalYamlValidationTest.java
- [ ] Minimmum attributes and popular attributes are configured
- [ ] `nudgeToolConfig` has at least 3 scores defined.
- [ ] `subsets` (for fast filters, and for nudge tool wizard) covers reasonable ranges for the current market.
- [ ] All text is available in both `fr` and `en`.