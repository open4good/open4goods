<span class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownFilterMenu-[[${id}]]" 
      data-bs-toggle="dropdown" aria-expanded="false">
    <span th:if="${icon}" class="fas me-2" th:classappend="${icon}"></span>
    <span th:unless="${icon}" class="fas me-2 fa-question-circle"></span>
    <span th:text="${title}"></span>
  </button>
  <div class="dropdown-menu p-3 w-100" aria-labelledby="dropdownFilterMenu-[[${id}]]">
    <div class="row" id="filterList-[[${id}]]">
      
      <!-- Filter Items -->
      <div th:each="term, index : ${products.filterKnownTerms(terms)}" class="col-12 filter-item" 
           th:classappend="${index.index} <= 5 ? '' : 'hidden-item'" 
           th:style="${index.index} <= 5 ? '' : 'display: none;'">
        
        <th:block th:if="${termsLineWidget}">
          <th:block th:insert="~{'inc/'+${termsLineWidget}+'.html'}"></th:block>
        </th:block>
        
        <div class="form-check mb-1" th:unless="${termsLineWidget}">
          <input class="form-check-input changeableBox" type="checkbox" th:data-id="${id}" 
                 th:data-value="${term.text}" th:id="${id}+'-'+${index.count}">
          <label th:if="${mapToI18NPrefix}" th:text="#{${mapToI18NPrefix} + ${term.text}}" 
                 class="form-check-label" th:for="${id}+'-'+${index.count}"></label>
          
          <th:block th:unless="${mapToI18NPrefix}">
            <label th:unless="${id=='brand'}" th:text="${term.text}" class="form-check-label" 
                   th:for="${id}+'-'+${index.count}"></label>
            <label th:if="${id=='brand'}" class="form-check-label" 
                   th:for="${id}+'-'+${index.count}">
              <a th:href="'/'+ ${verticalConfig.i18n(siteLanguage).verticalHomeUrl} + '/marques/'+${term.urlEncodedText()}" 
                 th:text="${term.text}"></a>
            </label>
          </th:block>
          
          <span th:text="${term.count}" th:id="'badge'+'-'+${id}+'-'+${term.id}" 
                class="badge bg-gray badge-pill float-end"></span>
        </div>
      </div>
      
      <!-- Missing Bucket -->
      <th:block th:with="missing = ${products.unknownTerms(terms)}">
        <div th:if="${missing != null && missing > 0}" class="col-12 filter-item">
          <input class="form-check-input changeableBox" type="checkbox" th:data-id="${id}" 
                 data-value="ES-UNKNOWN" th:id="${id}+'-missing'">
          <label class="form-check-label" th:for="${id}+'-missing'">Inconnus</label>
          <span th:text="${missing}" th:id="'badge'+'-'+${id}+'-missing'" 
                class="badge bg-gray badge-pill float-end"></span>
        </div>
      </th:block>
      
      <!-- Show More Link -->
      <th:block th:if="${terms.size()} > 5">
        <div class="show-more-link form-check mb-1">
          <a href="javascript:void(0);" class="float-end mt-2 show-more">Afficher plus</a>
        </div>
      </th:block>
    </div>
  </div>
</span>
