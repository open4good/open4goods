







<th:block th:fragment="product-presentation-variations-0">



<section id="markerPresentation" class="container container-semi-fluid section">

        <div class="row text-center justify-content-center">
           <div class="col-md-8 mb-5">
                <h2 class="display-3">
                    Bilan du <span  th:text="${product.bestName()}"></span>
                </h2>
          </div>
        </div>  
        
            
            <th:block th:unless="${aiReview}">
                <!--  TODO : card Widget with big AI icon-on the left, and a title and a description on the right-> -->
                <button id="triggerButton" class="btn btn-facebook mb-3">Génerer</button>
            </th:block>        
        
        
 
            <!-- Modal structure -->
            <div class="modal fade modal-lg" id="reviewProcessModal" tabindex="-1" role="dialog" 
                 aria-labelledby="reviewProcessModalLabel" aria-hidden="true" 
                 data-backdrop="static" 
                 data-keyboard="false">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="reviewProcessModalLabel">Analyse de <span th:text="${product.brandAndModel()}"></span></h5>
                    <!-- Dismiss button removed to enforce non-dismissible behavior -->
                  </div>
                  <div class="modal-body" id="modalContentContainer">
                    <!-- Content will be loaded here dynamically -->
                  </div>
                  <div class="modal-footer">
                    <!-- Optional footer content -->
                  </div>
                </div>
              </div>
            </div>



















    <!-- Podium section 

    <div class="row mb-5">
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card shadow p-1 p-md-4 mb-4 mb-lg-0">
                <div class="card-body">
                    <div class="icon icon-shape icon-shape-primary rounded-circle mb-4">
                        <span class="far fa-lightbulb"></span>
                    </div>
                    <h3 class="h5 mb-3">Dans le top 3 des consommations électriques</h3>
                    <p>Ce téléviseur est dans le top 3 des consommations</p>
                    <a href="#" class="btn btn-sm btn-primary animate-up-1">Learn more</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card shadow p-1 p-md-4 mb-4 mb-lg-0">
                <div class="card-body">
                    <div class="icon icon-shape icon-shape-primary rounded mb-4">
                        <span class="fas fa-chess-queen"></span>
                    </div>
                    <h3 class="h5 mb-3">Powerful Techniques</h3>
                    <p>Designed with the latest design trends in mind. Our product feels modern, creative, and beautiful.</p>
                    <a href="#" class="btn btn-sm btn-primary animate-up-1">Learn more</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card shadow p-1 p-md-4 mb-4 mb-lg-0">
                <div class="card-body">
                    <div class="icon icon-shape icon-shape-primary organic-radius mb-4">
                        <span class="fas fa-smile-beam"></span>
                    </div>
                    <h3 class="h5 mb-3">100% Satisfaction</h3>
                    <p>Designed with the latest design trends in mind. Our product feels modern, creative, and beautiful.</p>
                    <a href="#" class="btn btn-sm btn-primary animate-up-1">Learn more</a>
                </div>
            </div>
        </div>
    </div>

    -->
            <div class="row">
                  
               <!-- Identity -->
               
               <div class="col-12 col-lg-4">
            
            
            
            
                  <!-- Tops 
            <div class="card shadow border-gray-300">
                <div class="card-body p-4 p-lg-5">
                    <div class="d-flex p-3 justify-content-center">
                        <div class="icon icon-primary">
                            <span class="fas fa-trophy"></span>
                        </div>
                        <div class="ps-4">
                            <h3 class="h5 icon-box-title md-1">Les tops</h3>
                        </div>
                    </div>
                    <div class="lead" th:text="${product.bestsScores}"></div>
                </div>
            </div>
                  -->

            <!-- Flops
                  <div  class="card shadow border-gray-300">
                   <div class="card-body p-4 p-lg-5">
                         <div class="d-flex p-3 justify-content-center">                                                     
                             <div class="icon icon-primary">
                                 <span class="fas fa-thumbs-down"></span>
                             </div>                                                      
                             <div class="ps-4">
                                 <h3 class="h5 icon-box-title md-1">Les flops</h3>
                             </div>
                         </div>
                         <div  th:text="${product.worsesScores}" class="lead">
                         </div>
                   </div>
                 </div>
             -->
  
  
  
                    <!-- Identity -->
                   <div  class="card shadow border-gray-300">
                      <div class="card-body p-4 p-lg-5">
                            <div class="d-flex p-3 justify-content-center">                                                     
                                <div class="icon icon-primary">
                                    <span class="fas fa-id-card"></span>
                                </div>                                                      
                                <div class="ps-4">
                                    <h3 class="h5 icon-box-title md-1">Fiche d'identité</h3>
                                </div>
                            </div>
                            <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                      </div>
                  </div>
                  
  

                  
               </div>                  
               
               <!-- Description -->
                <div class="col-lg-8">
                    
                    
                    
                    
                   <!-- Presentation -->
                   <div th:if="${aiReview}" class="card shadow border-gray-300">
                      <div class="card-body p-4 p-lg-5">
                            <div class="d-flex p-3 justify-content-center">                                                     
                                <div class="icon icon-primary">
                                    <span class="fas fa-id-card"></span>
                                </div>                                                      
                                <div class="ps-4">
                                    <h3 class="h5 icon-box-title md-1">Présentation</h3>
                                </div>
                            </div>
                            <div  class="lead" th:utext="${aiReview.description}"></div>
                      </div>
                    </div>

                    <div th:if="${aiReview}" class="row ">
                        <!-- Avantages -->
                        <div  class="col-sm-12 col-md-12 col-lg-6 mt-3">
                            <!-- Icon Box -->
                            <div class="card border-gray-300 ">
                                <div class="card-body">
                                    <div class="d-flex p-3">
                                        <div class="icon icon-primary">
                                            <span class="fas fa-plus"></span>
                                        </div>
                                        <div class="ps-4">
                                            <h3 class="h5 icon-box-title md-1">Avantages</h3>
                                        </div>
                                    </div>
                                     <ul>
                                       <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                                     
                                     </ul>
                                </div>
                            </div>
                            <!-- End of Icon Box -->
                        </div>

                        <!-- Inconvénients -->
                        <div th:if="${aiReview}" class="col-sm-12 col-md-12 col-lg-6 mt-3">
                            <!-- Icon Box -->
                            <div class="card border-gray-300 ">
                                <div class="card-body">
                                    <div class="d-flex p-3">
                                        <div class="icon icon-primary">
                                            <span class="fas fa-minus"></span>
                                        </div>
                                        <div class="ps-4">
                                            <h3 class="h5 icon-box-title md-1">Inconvénients</h3>
                                        </div>
                                    </div>
                                                                        <ul>
                                       <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                                     
                                     </ul>
                                </div>
                            </div>
                            <!-- End of Icon Box -->
                        </div>
                    </div>
                    
                    
                    
                    
                    
                    <div th:if="${aiReview}" class="row ">
                        <!-- Avantages -->
                        <div  class="col-sm-12 col-md-12 col-lg-6 mt-3">
                            <!-- Icon Box -->
                            <div class="card border-gray-300 ">
                                <div class="card-body">
                                    <div class="d-flex p-3">
                                        <div class="icon icon-primary">
                                            <span class="fas fa-plus"></span>
                                        </div>
                                        <div class="ps-4">
                                            <h3 class="h5 icon-box-title md-1">Revue technique</h3>
                                        </div>
                                    </div>
                                     <p th:text="${aiReview.technicalReview}" ></p>
                                </div>
                            </div>
                            <!-- End of Icon Box -->
                        </div>

                        <!-- Inconvénients -->
                        <div th:if="${aiReview}" class="col-sm-12 col-md-12 col-lg-6 mt-3">
                            <!-- Icon Box -->
                            <div class="card border-gray-300 ">
                                <div class="card-body">
                                    <div class="d-flex p-3">
                                        <div class="icon icon-primary">
                                            <span class="fas fa-minus"></span>
                                        </div>
                                        <div class="ps-4">
                                            <h3 class="h5 icon-box-title md-1">Ecologie et durabilité</h3>
                                        </div>
                                    </div>
                                    <p th:text="${aiReview.ecologicalReview}" ></p>
                                </div>
                            </div>
                            <!-- End of Icon Box -->
                        </div>
                    </div>
                    

                  <!-- Bilan -->
                  <div th:if="${aiReview}" class="mt-4 mb-4 card shadow border-gray-300">
                       <div class="card-body p-4 p-lg-5">
                             <div class="d-flex p-3 justify-content-center">                                                     
                                 <div class="icon icon-primary">
                                     <span class="fas fa-id-card"></span>
                                 </div>                                                      
                                 <div class="ps-4">
                                     <h3 class="h5 icon-box-title md-1">Verdict</h3>
                                 </div>
                             </div>
                             <div  class="lead" th:utext="${aiReview.summary}"></div>
                       </div>
                 </div>
  
                    
                </div>
            </div>
            
            <!-- Sources -->
            <div class="row">
                <!-- Table sources -->
               <div class="col-12 col-lg-12">
                   <!-- Presentation -->
                   <div th:if="${aiReview}" class="card shadow border-gray-300">
                      <div class="card-body p-4 p-lg-5">
                            <div class="d-flex p-3 justify-content-center">                                                     
                                <div class="icon icon-primary">
                                    <span class="fas fa-id-card"></span>
                                </div>                                                      
                                <div class="ps-4">
                                    <h3 class="h5 icon-box-title md-1">Sources</h3>
                                </div>
                            </div>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <th scope="col" id="class2">Ref</th>
                                    <th scope="col" id="teacher2">Nom</th>
                                    <th scope="col" id="males2">Description</th>
                                </tr>
                                <tr th:each="item,stat : ${aiReview.sources}">
                                    <td th:id="'review-source-'+${item.number}" scope="row"  ><span th:text="${item.number}" ></span></td>
                                    <td scope="row" ><a target="_blank" rel="nofollow" th:href="${item.url}" th:text="${item.name}" ></a></td>
                                    <td scope="row" ><span th:text="${item.description}" ></span></td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>



                </div>
                    </div>
               
               
               </div>
                
            
            </div>
            
            
</section> 
       
       
       
       

</th:block>


<!-- 
   =============================================================================
   SNIPPET #1
   =============================================================================
   Contains Variation 1 & Variation 2 using only Bootstrap 5 classes.
   Put this into: inc/product-presentation-variationss.html
   =============================================================================
-->

<!--/* Variation 1 - Classic two-column layout with a small card for the AI generation (TODO) 
       using only native Bootstrap 5 classes. Light, standard look. */-->
<th:block th:fragment="product-presentation-variations-1">
<section id="markerPresentation" class="container section my-5">

    <!--/* Title row */-->
    <div class="row text-center mb-4">
        <div class="col">
            <h2 class="display-5">
                Bilan du <span th:text="${product.bestName()}"></span>
            </h2>
        </div>
    </div>
    
    <!--/* AI generation card if not aiReview, with icon on the left (TODO) */-->
    <th:block th:unless="${aiReview}">
        <div class="card mb-3 shadow-sm">
            <div class="row g-0 align-items-center">
                <div class="col-auto p-3 d-flex justify-content-center">
                    <!-- Example of a big AI icon -->
                    <span class="display-3 text-primary" aria-hidden="true">
                        <i class="fas fa-robot"></i>
                    </span>
                </div>
                <div class="col">
                    <div class="card-body">
                        <h3 class="h5">Génération du bilan</h3>
                        <p class="mb-3">Cliquez pour obtenir une analyse automatique du produit.</p>
                        <button id="triggerButton" class="btn btn-primary">
                            Générer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </th:block>

    <!-- Modal structure -->
    <div class="modal fade modal-lg" id="reviewProcessModal" tabindex="-1" aria-labelledby="reviewProcessModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewProcessModalLabel">
                        Analyse de <span th:text="${product.brandAndModel()}"></span>
                    </h5>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- Content loaded dynamically -->
                </div>
                <div class="modal-footer">
                    <!-- optional footer -->
                </div>
            </div>
        </div>
    </div>

    <!-- Main row: left identity, right review content -->
    <div class="row">
        <!-- Left column: identity card -->
        <div class="col-lg-4 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="me-3 text-primary">
                            <i class="fas fa-id-card fa-2x" aria-hidden="true"></i>
                        </div>
                        <h3 class="h5 mb-0">Fiche d'identité</h3>
                    </div>
                    <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                </div>
            </div>
        </div>

        <!-- Right column: if aiReview, show the sections -->
        <div class="col-lg-8">
            <div th:if="${aiReview}">
                
                <!-- Presentation -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="h6 mb-3 text-primary">
                            <i class="fas fa-info-circle me-2" aria-hidden="true"></i>Présentation
                        </h3>
                        <div th:utext="${aiReview.description}" class="small"></div>
                    </div>
                </div>
                
                <!-- Pros & Cons row -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="h6 text-success mb-3">
                                    <i class="fas fa-plus-circle me-1"></i>Avantages
                                </h4>
                                <ul>
                                    <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="h6 text-danger mb-3">
                                    <i class="fas fa-minus-circle me-1"></i>Inconvénients
                                </h4>
                                <ul>
                                    <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technical & Eco row -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="h6 mb-3">
                                    <i class="fas fa-plus me-1"></i>Revue technique
                                </h4>
                                <p th:text="${aiReview.technicalReview}"></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="h6 mb-3">
                                    <i class="fas fa-leaf me-1"></i>Ecologie et durabilité
                                </h4>
                                <p th:text="${aiReview.ecologicalReview}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Verdict -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body">
                        <h4 class="h6 mb-3 text-primary">
                            <i class="fas fa-balance-scale me-1"></i>Verdict
                        </h4>
                        <div th:utext="${aiReview.summary}"></div>
                    </div>
                </div>

                <!-- Sources -->
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h4 class="h6 mb-3">
                            <i class="fas fa-book-open me-1"></i>Sources
                        </h4>
                        <div class="table-responsive">
                            <table class="table table-striped small">
                                <thead>
                                    <tr>
                                        <th scope="col" id="refNumber">Ref</th>
                                        <th scope="col" id="refName">Nom</th>
                                        <th scope="col" id="refDesc">Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="item : ${aiReview.sources}">
                                        <td scope="row" th:text="${item.number}"></td>
                                        <td>
                                            <a target="_blank" rel="nofollow" th:href="${item.url}" th:text="${item.name}"></a>
                                        </td>
                                        <td th:text="${item.description}"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div> <!-- end if aiReview -->
        </div> <!-- end col-lg-8 -->
    </div> <!-- end row -->

</section>
</th:block>


<!--/* Variation 2 - Use an Accordion for the AI review sections. 
       Still Bootstrap 5 only. 
       Keep identity card separate on the left. 
*/-->
<th:block th:fragment="product-presentation-variations-2">
<section id="markerPresentation" class="container section my-5">

    <div class="row text-center mb-4">
        <div class="col">
            <h2 class="display-6">
                Bilan du <span th:text="${product.bestName()}"></span>
            </h2>
        </div>
    </div>

    <!-- If no AI yet, show a large button or card for generation -->
    <th:block th:unless="${aiReview}">
        <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="fas fa-robot me-3 fa-2x" aria-hidden="true"></i>
            <div>
                <strong>Génération du bilan:</strong> Lancez l'analyse du produit.
            </div>
            <button id="triggerButton" class="btn btn-info ms-auto" aria-label="Générer l'analyse">
                Générer
            </button>
        </div>
    </th:block>

    <!-- Modal structure -->
    <div class="modal fade" id="reviewProcessModal" tabindex="-1" aria-labelledby="reviewProcessModalLabel2" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewProcessModalLabel2">
                        Analyse de <span th:text="${product.brandAndModel()}"></span>
                    </h5>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- dynamic content -->
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Left column for identity -->
        <div class="col-md-4 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h3 class="h5 mb-3">
                        <i class="fas fa-id-card me-2 text-primary"></i>Fiche d'identité
                    </h3>
                    <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                </div>
            </div>
        </div>

        <!-- Right column for AI review (Accordion) -->
        <div class="col-md-8">
            <th:block th:if="${aiReview}">
                
                <div class="accordion" id="bilanAccordion">
                    <!-- Presentation -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Présentation
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#bilanAccordion">
                            <div class="accordion-body">
                                <p th:utext="${aiReview.description}"></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pros & Cons -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                Avantages et Inconvénients
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#bilanAccordion">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <h4 class="h6 text-success">Avantages</h4>
                                        <ul>
                                            <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                                        </ul>
                                    </div>
                                    <div class="col-sm-6">
                                        <h4 class="h6 text-danger">Inconvénients</h4>
                                        <ul>
                                            <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tech & Ecology -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Revue technique & Écologie
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#bilanAccordion">
                            <div class="accordion-body">
                                <h5 class="h6 text-primary">Revue technique</h5>
                                <p th:text="${aiReview.technicalReview}"></p>
                                <h5 class="h6 text-primary mt-3">Ecologie et durabilité</h5>
                                <p th:text="${aiReview.ecologicalReview}"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Verdict -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                Verdict
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#bilanAccordion">
                            <div class="accordion-body">
                                <div th:utext="${aiReview.summary}"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Sources -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFive">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                Sources
                            </button>
                        </h2>
                        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#bilanAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered small">
                                        <thead>
                                            <tr>
                                                <th>Ref</th>
                                                <th>Nom</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:each="item : ${aiReview.sources}">
                                                <td th:text="${item.number}"></td>
                                                <td>
                                                    <a target="_blank" rel="nofollow" th:href="${item.url}" th:text="${item.name}"></a>
                                                </td>
                                                <td th:text="${item.description}"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div> <!-- end accordion -->

            </th:block>
        </div> <!-- end col-md-8 -->
    </div> <!-- end row -->

</section>
</th:block>



<!-- 
   =============================================================================
   SNIPPET #2
   =============================================================================
   Contains Variation 3 (Bootstrap 5) and Variation 4 (Pixel UI kit).
   Put this in the same inc/product-presentation-variationss.html file or appended below 
   the snippet #1.
   =============================================================================
-->

<!--/* Variation 3 - “Grid of Cards” approach with Bootstrap 5, each section in its own card. */-->
<th:block th:fragment="product-presentation-variations-3">
<section class="container my-5">
    <!--/* Title and optional generation button (TODO) */-->
    <div class="row mb-4">
        <div class="col">
            <h2 class="h4">Bilan du <span th:text="${product.bestName()}"></span></h2>
        </div>
        <th:block th:unless="${aiReview}">
            <div class="col-auto text-end">
                <button id="triggerButton" class="btn btn-outline-primary">
                    <i class="fas fa-robot me-1"></i> Générer
                </button>
            </div>
        </th:block>
    </div>

    <!-- Modal for AI generation -->
    <div class="modal fade" id="reviewProcessModal" tabindex="-1" aria-labelledby="reviewModalLabel3" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewModalLabel3">Analyse <span th:text="${product.brandAndModel()}"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- dynamic content -->
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <!-- Identity card always -->
        <div class="col-md-4">
            <div class="card border-secondary h-100">
                <div class="card-header bg-secondary text-white">
                    <i class="fas fa-id-card me-2"></i>Fiche d'identité
                </div>
                <div class="card-body">
                    <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                </div>
            </div>
        </div>

        <!-- Only show the next cards if aiReview is present -->
        <th:block th:if="${aiReview}">
            <!-- Presentation -->
            <div class="col-md-8">
                <div class="card border-info h-100">
                    <div class="card-header bg-info text-white">
                        <i class="fas fa-info-circle me-2"></i>Présentation
                    </div>
                    <div class="card-body">
                        <p th:utext="${aiReview.description}"></p>
                    </div>
                </div>
            </div>

            <!-- Pros & cons -->
            <div class="col-md-6">
                <div class="card border-success h-100">
                    <div class="card-header bg-success text-white">
                        <i class="fas fa-thumbs-up me-2"></i>Avantages
                    </div>
                    <div class="card-body">
                        <ul>
                            <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-danger h-100">
                    <div class="card-header bg-danger text-white">
                        <i class="fas fa-thumbs-down me-2"></i>Inconvénients
                    </div>
                    <div class="card-body">
                        <ul>
                            <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tech & Ecology -->
            <div class="col-md-6">
                <div class="card border-secondary h-100">
                    <div class="card-header">
                        <i class="fas fa-cogs me-2"></i>Revue technique
                    </div>
                    <div class="card-body">
                        <p th:text="${aiReview.technicalReview}"></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-secondary h-100">
                    <div class="card-header">
                        <i class="fas fa-leaf me-2"></i>Ecologie & durabilité
                    </div>
                    <div class="card-body">
                        <p th:text="${aiReview.ecologicalReview}"></p>
                    </div>
                </div>
            </div>

            <!-- Verdict -->
            <div class="col-md-12">
                <div class="card border-warning">
                    <div class="card-header bg-warning">
                        <i class="fas fa-balance-scale me-2"></i>Verdict
                    </div>
                    <div class="card-body">
                        <div th:utext="${aiReview.summary}"></div>
                    </div>
                </div>
            </div>

            <!-- Sources -->
            <div class="col-md-12">
                <div class="card border-light">
                    <div class="card-header bg-light">
                        <i class="fas fa-book me-2"></i>Sources
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-striped">
                                <thead>
                                    <tr>
                                        <th>Ref</th>
                                        <th>Nom</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="item : ${aiReview.sources}">
                                        <td th:text="${item.number}"></td>
                                        <td>
                                            <a th:href="${item.url}" target="_blank" rel="nofollow" th:text="${item.name}"></a>
                                        </td>
                                        <td th:text="${item.description}"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </th:block>
    </div>
</section>
</th:block>


<!--/* Variation 4 - Using Pixel Pro UI kit classes. 
       Example: icon, shape, shadow, border-gray-300, btn-tertiary, etc. 
*/-->
<th:block th:fragment="product-presentation-variations-4">
<section class="container container-semi-fluid">
    <!--/* Title row with Pixel classes */-->
    <div class="row text-center justify-content-center mt-4 mb-4 ">
        <div class="col-md-8">
            <h2 class="display-4">Bilan du 
                <span class="text-tertiary" th:text="${product.bestName()}"></span>
            </h2>
        </div>
    </div>

    <!-- AI generation card (if no aiReview) with pixel classes -->
    <th:block th:unless="${aiReview}">
        <div class="card shadow border-gray-300 mb-4">
            <div class="card-body d-flex align-items-center">
                <div class="icon icon-shape icon-shape-secondary rounded-circle me-3">
                    <span class="fas fa-robot"></span>
                </div>
                <div>
                    <h3 class="h5">Génération automatique</h3>
                    <p class="mb-0">Cliquez pour obtenir un bilan AI.</p>
                </div>
                <button id="triggerButton" class="btn btn-tertiary ms-auto">
                    Générer
                </button>
            </div>
        </div>
    </th:block>

    <!-- Pixel-styled modal -->
    <div class="modal fade" id="reviewProcessModal" tabindex="-1" role="dialog"
         aria-labelledby="reviewModalLabel4" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-tertiary modal-dialog-centered" role="document">
            <div class="modal-content text-white">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="reviewModalLabel4">
                        Analyse: <span th:text="${product.brandAndModel()}"></span>
                    </h5>
                    <button type="button" class="btn-close bg-gray-500" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Identity + Review row -->
    <div class="row">
        <!-- Identity block -->
        <div class="col-lg-4">
            <div class="card border-gray-300 shadow mb-4">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <div class="icon icon-primary me-3">
                            <span class="fas fa-id-badge"></span>
                        </div>
                        <h3 class="h5">Fiche d'identité</h3>
                    </div>
                    <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                </div>
            </div>
        </div>
        
        <!-- Right side for AI content (if present) -->
        <div class="col-lg-8">
            <th:block th:if="${aiReview}">
                <!-- Pixel-like icon boxes for each section -->

                <div class="card border-gray-300 shadow mb-4">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="icon icon-info me-3">
                                <span class="fas fa-info-circle"></span>
                            </div>
                            <h3 class="h6">Présentation</h3>
                        </div>
                        <p class="lead" th:utext="${aiReview.description}"></p>
                    </div>
                </div>

                <!-- Pros / Cons in two Pixel "icon-box" cards side by side -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-gray-300 shadow mb-4">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="icon icon-success me-3">
                                        <span class="fas fa-thumbs-up"></span>
                                    </div>
                                    <h4 class="h6 mb-0">Avantages</h4>
                                </div>
                                <ul>
                                    <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-gray-300 shadow mb-4">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="icon icon-danger me-3">
                                        <span class="fas fa-thumbs-down"></span>
                                    </div>
                                    <h4 class="h6 mb-0">Inconvénients</h4>
                                </div>
                                <ul>
                                    <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Another row for technical & ecology -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-gray-300 shadow mb-4">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="icon icon-primary me-3">
                                        <span class="fas fa-cog"></span>
                                    </div>
                                    <h4 class="h6 mb-0">Revue technique</h4>
                                </div>
                                <p th:text="${aiReview.technicalReview}"></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-gray-300 shadow mb-4">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="icon icon-tertiary me-3">
                                        <span class="fas fa-seedling"></span>
                                    </div>
                                    <h4 class="h6 mb-0">Écologie</h4>
                                </div>
                                <p th:text="${aiReview.ecologicalReview}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Verdict -->
                <div class="card border-gray-300 shadow mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="icon icon-warning me-3">
                                <span class="fas fa-flag-checkered"></span>
                            </div>
                            <h4 class="h6 mb-0">Verdict</h4>
                        </div>
                        <div th:utext="${aiReview.summary}" class="lead"></div>
                    </div>
                </div>

                <!-- Sources in a Pixel table style -->
                <div class="card border-gray-300 shadow mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="icon icon-dark me-3">
                                <span class="fas fa-book"></span>
                            </div>
                            <h4 class="h6 mb-0">Sources</h4>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Ref</th>
                                        <th>Nom</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="item : ${aiReview.sources}">
                                        <td th:text="${item.number}"></td>
                                        <td>
                                            <a th:href="${item.url}" target="_blank" rel="nofollow" th:text="${item.name}"></a>
                                        </td>
                                        <td th:text="${item.description}"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </th:block>
        </div>
    </div>
</section>
</th:block>



<!-- 
   =============================================================================
   SNIPPET #3
   =============================================================================
   Contains Variation 5 & Variation 6, using Pixel UI kit classes.
   Append to inc/product-presentation-variationss.html
   =============================================================================
-->

<!--/* Variation 5 - Step-like layout using Pixel "step" classes. 
       Each part is a "step" in the overall product review. 
*/-->
<th:block th:fragment="product-presentation-variations-5">
<section class="container section pt-5 pb-5">
    <div class="row text-center justify-content-center mb-4">
        <div class="col-lg-8">
            <h2 class="display-5">Bilan du <span th:text="${product.bestName()}"></span></h2>
        </div>
    </div>

    <!-- If no AI yet, show a Pixel-style card for generation -->
    <th:block th:unless="${aiReview}">
        <div class="card shadow border-gray-300 mb-4">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h3 class="h5">Génération du bilan</h3>
                    <p class="mb-0">Cliquez pour obtenir une analyse du produit via AI.</p>
                </div>
                <button id="triggerButton" class="btn btn-tertiary">
                    <span class="fas fa-robot me-2"></span>Générer
                </button>
            </div>
        </div>
    </th:block>

    <!-- Pixel style modal -->
    <div class="modal fade modal-tertiary" id="reviewProcessModal" tabindex="-1" aria-labelledby="reviewModalLabel5" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-white">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="reviewModalLabel5">Analyse <span th:text="${product.brandAndModel()}"></span></h5>
                    <button type="button" class="btn-close bg-gray-500" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- dynamic -->
                </div>
            </div>
        </div>
    </div>

    <!-- Step container -->
    <div class="row">
        <div class="col-12">
            <!-- Step 1: Identity -->
            <div class="step text-center mb-5">
                <div class="step-shape shape-gray-300 organic-radius mb-4">
                    <span class="step-number border-white">1</span>
                    <span class="step-icon icon-secondary">
                        <span class="fas fa-id-card"></span>
                    </span>
                </div>
                <h3 class="h5 step-title">Fiche d'identité</h3>
                <div class="mt-3 mx-auto" style="max-width: 700px;">
                    <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                </div>
            </div>
        </div>

        <!-- Only show the rest if aiReview is present -->
        <th:block th:if="${aiReview}">
            <!-- Step 2: Présentation -->
            <div class="col-12">
                <div class="step text-center mb-5">
                    <div class="step-shape shape-gray-300 organic-radius mb-4">
                        <span class="step-number border-white">2</span>
                        <span class="step-icon icon-primary">
                            <span class="fas fa-info-circle"></span>
                        </span>
                    </div>
                    <h3 class="h5 step-title">Présentation</h3>
                    <div class="mt-3 mx-auto" style="max-width: 700px;">
                        <p th:utext="${aiReview.description}"></p>
                    </div>
                </div>
            </div>

            <!-- Step 3: Avantages / Inconvénients -->
            <div class="col-12">
                <div class="step text-center mb-5">
                    <div class="step-shape shape-gray-300 organic-radius mb-4">
                        <span class="step-number border-white">3</span>
                        <span class="step-icon icon-info">
                            <span class="fas fa-exchange-alt"></span>
                        </span>
                    </div>
                    <h3 class="h5 step-title">Avantages et Inconvénients</h3>
                    <div class="row justify-content-center mt-4">
                        <div class="col-md-5">
                            <h4 class="h6 text-success">Avantages</h4>
                            <ul>
                                <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                            </ul>
                        </div>
                        <div class="col-md-5">
                            <h4 class="h6 text-danger">Inconvénients</h4>
                            <ul>
                                <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Technique / Ecologie -->
            <div class="col-12">
                <div class="step text-center mb-5">
                    <div class="step-shape shape-gray-300 organic-radius mb-4">
                        <span class="step-number border-white">4</span>
                        <span class="step-icon icon-warning">
                            <span class="fas fa-cogs"></span>
                        </span>
                    </div>
                    <h3 class="h5 step-title">Revue technique & Écologie</h3>
                    <div class="row justify-content-center mt-4">
                        <div class="col-md-5">
                            <h4 class="h6 text-primary">Technique</h4>
                            <p th:text="${aiReview.technicalReview}"></p>
                        </div>
                        <div class="col-md-5">
                            <h4 class="h6 text-tertiary">Écologie</h4>
                            <p th:text="${aiReview.ecologicalReview}"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Verdict -->
            <div class="col-12">
                <div class="step text-center mb-5">
                    <div class="step-shape shape-gray-300 organic-radius mb-4">
                        <span class="step-number border-white">5</span>
                        <span class="step-icon icon-danger">
                            <span class="fas fa-flag-checkered"></span>
                        </span>
                    </div>
                    <h3 class="h5 step-title">Verdict</h3>
                    <div class="mt-3 mx-auto" style="max-width: 700px;">
                        <p th:utext="${aiReview.summary}"></p>
                    </div>
                </div>
            </div>

            <!-- Step 6: Sources -->
            <div class="col-12">
                <div class="step text-center">
                    <div class="step-shape shape-gray-300 organic-radius mb-4">
                        <span class="step-number border-white">6</span>
                        <span class="step-icon icon-dark">
                            <span class="fas fa-book"></span>
                        </span>
                    </div>
                    <h3 class="h5 step-title">Sources</h3>
                    <div class="table-responsive mx-auto" style="max-width: 700px;">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Ref</th>
                                    <th>Nom</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="item : ${aiReview.sources}">
                                    <td th:text="${item.number}"></td>
                                    <td>
                                        <a th:href="${item.url}" target="_blank" rel="nofollow" th:text="${item.name}"></a>
                                    </td>
                                    <td th:text="${item.description}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </th:block>
    </div>
</section>
</th:block>


<!--/* Variation 6 - Another Pixel-based layout, for example a flush “tabbed” layout 
       or a horizontal approach with “card-rotate” or “rotating-card.” 
*/-->
<th:block th:fragment="product-presentation-variations-6">
<section class="container section pt-5 pb-5">

    <div class="row text-center justify-content-center mb-5">
        <div class="col-md-8">
            <h2 class="display-6">Bilan du <span th:text="${product.bestName()}"></span></h2>
        </div>
    </div>

    <th:block th:unless="${aiReview}">
        <div class="card shadow-sm border-gray-300 mb-4 p-4 text-center">
            <div class="d-flex justify-content-center align-items-center mb-3">
                <div class="icon icon-lg icon-primary me-3">
                    <span class="fas fa-robot"></span>
                </div>
                <h3 class="h5">Génération AI</h3>
            </div>
            <p>Obtenez un bilan complet de ce produit grâce à l'IA.</p>
            <button id="triggerButton" class="btn btn-primary mt-2">Générer</button>
        </div>
    </th:block>

    <!-- Pixel rotating card for identity if aiReview is present, just as a fun variation -->
    <div class="rotating-card mb-4" th:if="${aiReview}">
        <div class="card card-rotate shadow border-gray-300">
            <!-- Front side -->
            <div class="front text-center p-4">
                <div class="icon icon-tertiary mb-3">
                    <span class="fas fa-id-card"></span>
                </div>
                <h3 class="h5">Fiche d'identité</h3>
                <p>Cliquez pour voir les détails.</p>
                <button class="btn btn-tertiary btn-sm rotate-button">
                    <span class="fas fa-sync-alt me-1"></span>Retourner
                </button>
            </div>
            <!-- Back side -->
            <div class="back p-4 text-start">
                <div class="d-flex align-items-center mb-3">
                    <div class="icon icon-primary me-3">
                        <span class="fas fa-id-card"></span>
                    </div>
                    <h4 class="h6 mb-0">Fiche d'identité</h4>
                </div>
                <th:block th:insert="~{inc/product-referentiel-attributes.html}"></th:block>
                <button class="btn btn-sm btn-outline-primary rotate-button mt-3">
                    <span class="fas fa-undo me-1"></span>Revenir
                </button>
            </div>
        </div>
    </div>

    <!-- The rest of the sections in normal Pixel cards -->
    <!-- Modal for AI -->
    <div class="modal fade" id="reviewProcessModal" tabindex="-1" aria-labelledby="reviewModalLabel6" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content border-gray-300">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewModalLabel6">
                        Analyse <span th:text="${product.brandAndModel()}"></span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modalContentContainer">
                    <!-- dynamic content here -->
                </div>
            </div>
        </div>
    </div>

    <th:block th:if="${aiReview}">
        <!-- Presentation -->
        <div class="card shadow border-gray-300 mb-4">
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="icon icon-info me-3">
                        <span class="fas fa-info-circle"></span>
                    </div>
                    <h4 class="h6 mb-0">Présentation</h4>
                </div>
                <p th:utext="${aiReview.description}"></p>
            </div>
        </div>

        <!-- Pros & Cons row -->
        <div class="row">
            <div class="col-md-6">
                <div class="card shadow border-gray-300 mb-4">
                    <div class="card-body">
                        <h4 class="h6 text-success mb-3">
                            <span class="far fa-smile-beam me-2"></span>Avantages
                        </h4>
                        <ul>
                            <li th:each="pro : ${aiReview.pros}" th:utext="${pro}"></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow border-gray-300 mb-4">
                    <div class="card-body">
                        <h4 class="h6 text-danger mb-3">
                            <span class="far fa-frown me-2"></span>Inconvénients
                        </h4>
                        <ul>
                            <li th:each="con : ${aiReview.cons}" th:utext="${con}"></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tech & Ecology -->
        <div class="row">
            <div class="col-md-6">
                <div class="card shadow border-gray-300 mb-4">
                    <div class="card-body">
                        <h4 class="h6 text-primary mb-3">
                            <span class="fas fa-cog me-2"></span>Revue technique
                        </h4>
                        <p th:text="${aiReview.technicalReview}"></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow border-gray-300 mb-4">
                    <div class="card-body">
                        <h4 class="h6 text-tertiary mb-3">
                            <span class="fas fa-leaf me-2"></span>Écologie
                        </h4>
                        <p th:text="${aiReview.ecologicalReview}"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Verdict -->
        <div class="card shadow border-gray-300 mb-4">
            <div class="card-body">
                <h4 class="h6 mb-3">
                    <span class="fas fa-flag-checkered me-2"></span>Verdict
                </h4>
                <div th:utext="${aiReview.summary}"></div>
            </div>
        </div>

        <!-- Sources -->
        <div class="card shadow border-gray-300 mb-4">
            <div class="card-body">
                <h4 class="h6 mb-3">
                    <span class="fas fa-book me-2"></span>Sources
                </h4>
                <div class="table-responsive">
                    <table class="table table-striped table-hover small">
                        <thead>
                            <tr>
                                <th>Ref</th>
                                <th>Nom</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="item : ${aiReview.sources}">
                                <td th:text="${item.number}"></td>
                                <td>
                                    <a th:href="${item.url}" target="_blank" rel="nofollow" th:text="${item.name}"></a>
                                </td>
                                <td th:text="${item.description}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </th:block>
</section>
</th:block>
